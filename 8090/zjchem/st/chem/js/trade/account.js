(function(e,f){function g(a,c,d){f.isFunction(c)&&(d=c,c={});e.ajax({async:!0,type:"POST",dataType:"json",url:a,data:c,success:function(a){d(a)},error:function(){d&&d({code:"403",message:"\u8bf7\u6c42\u5904\u7406\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5\u3002"})}})}_account={url:{login:"",logout:"",regist:"",homepage:"",userinfo:"",loginURL:""},loadUserInfo:function(){g(this.url.userinfo,function(a){var c=e("#userinfo").children("a");if(a&&a.isLogin){var d=a.headerUsername;e("#userinfo .user").text(d);
c.show();e("#userinfo").find("#login,#regist").hide();window._$userFunc&&window._$userFunc.call(this,a)}else c.show(),e("#userinfo").find("#logout, .user").hide()})},loadUserCenInfo:function(){1>e("#user_name").length||g(this.url.userinfo,function(a){if(a&&a.isLogin){var c=a.headerUsername;e("#user_name").text(c)}else e("#user_name").text("");window._$userCFunc&&window._$userCFunc.call(this,a);_WSServ&&_WSServ.initWebSocket&&_WSServ.initWebSocket(a.usercode)})},logout:function(){g(this.url.logout,
function(a){"SUCCESS"==a.RESULTCODE&&(e.cookies.set("username",null),window.location.href=f.account.url.homepage)})},login:function(){f.account.isBrowserSuport()&&(window.location.href=f.account.url.login)},regist:function(){f.account.isBrowserSuport()&&(window.location.href=f.account.url.regist)},isBrowserSuport:function(){var a,c;if("true"==f.IgnoreBrower)return!0;var d=navigator.userAgent.toLowerCase(),b=/(msie\s|trident.*rv:)([\w.]+)/.exec(d);null!=b&&(a="IE",c=b[2]||"0");b=/(firefox)\/([\w.]+)/.exec(d);
null!=b&&(a=b[1]||"",c=b[2]||"0");b=/(opera).+version\/([\w.]+)/.exec(d);null!=b&&(a=b[1]||"",c=b[2]||"0");b=/(chrome)\/([\w.]+)/.exec(d);null!=b&&(a=b[1]||"",c=b[2]||"0");b=/version\/([\w.]+).*(safari)/.exec(d);null!=b&&(a=b[2]||"",c=b[1]||"0");null!=b&&(a="",c="0");return a?"chrome"!=a&&"firefox"!=a&&("IE"==a&&"11"!=c.substr(0,2)||"IE"!=a)?(e("#downLoad").show(),!1):!0:!1}};f.account=_account})(jQuery,snBase);